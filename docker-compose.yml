version: '3'
services:
  ma6-main:
    image: 2swo/ma6-menbosha-back
    ports:
      - '3000:3000'
    env_file:
      - .env
    restart: always
    environment:
      REDIS_BINDING_PORT: ${REDIS_BINDING_PORT}
      REDIS_PORT: ${REDIS_PORT}
      TZ: Asia/Seoul

  redis:
    image: 2swo/redis
    command:
      - redis-server --port ${REDIS_PORT}
      - /redis.conf
    volumes:
      - ./redis.conf:/usr/local/etc/redis/redis.conf:rw
      - ./users.acl:/usr/local/etc/redis/users.acl:rw
    env_file:
      - .env
    ports:
      - ${REDIS_BINDING_PORT}:${REDIS_PORT}
    restart: always
